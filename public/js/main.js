(()=>{"use strict";var t={685:function(t,e,o){var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.Snake=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moves=0,e.time=0,e}return n(e,t),e.prototype.init=function(){var t=this,e=10;this.width=200,this.height=300,this.newZone(0,0,200,100,(function(e,o){e.strokeRect(5,5,195,50),e.fillText("Moves: "+t.moves,10,35),e.fillText("Time: "+t.time,100,35)}));for(var o=this.newZone(0,100,200,200,(function(t,e){t.strokeRect(0,100,e.width,e.height)})),i=o.newSprite(o.x,o.y,(function(t,o){t.fillRect(o.x,o.y,e,e),o.width=e,o.height=e})),n=0;n<20;n++)o.newSprite(0+n*e,290,(function(t,o){t.fillRect(o.x,o.y,e,e),o.width=e,o.height=e}));this.keyboard.enable(),this.keyboard.addCrossActions(i,e),this.onLoop=function(){return t.render(),t.world.gravityDown(o),t.time++,t.moves<500},this.onEnd=function(){t.keyboard.disable(),console.log("Game Over")}},e}(o(912).Game);e.Snake=r},912:function(t,e,o){var i=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))((function(n,r){function s(t){try{a(i.next(t))}catch(t){r(t)}}function h(t){try{a(i.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(s,h)}a((i=i.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var o,i,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function h(r){return function(h){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(n=2&r[0]?i.return:r[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,r[1])).done)return n;switch(i=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break}n[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{o=n=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,h])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var r=o(450),s=o(698),h=o(723),a=function(){function t(t){this.loopInterval=100,this.world=new h.World,this.zones=[],this.keyboard=new s.Keyboard,this.width=300,this.height=300,this.onLoop=function(){return!1},this.onEnd=function(){return!1};var e=document.getElementById(t);if(!e)throw new Error('invalid containerId "'+t+'"');this.container=e,this.canvas=document.createElement("canvas"),this.container.appendChild(this.canvas)}return t.prototype.newZone=function(t,e,o,i,n){void 0===n&&(n=function(){});var s=new r.Zone(this,n);return s.x=t,s.y=e,s.width=o,s.height=i,s.rendering=n,this.zones.push(s),s},t.prototype.initCanvas=function(){this.canvas.setAttribute("width",this.width+"px"),this.canvas.setAttribute("height",this.height+"px")},t.prototype.render=function(){var t=this.canvas.getContext("2d");if(!t)throw new Error("unable to get 2D context");for(var e in t.clearRect(0,0,this.width,this.height),this.zones)this.zones[e].render(t)},t.prototype.wait=function(t){return i(this,void 0,void 0,(function(){var e=this;return n(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(o){return setTimeout((function(){return o(e)}),t)}))];case 1:return[2,o.sent()]}}))}))},t.prototype.start=function(){return i(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,this.init()];case 1:t.sent(),this.initCanvas(),t.label=2;case 2:return[4,this.onLoop()];case 3:return t.sent()?[4,this.wait(this.loopInterval)]:[3,5];case 4:return t.sent(),[3,2];case 5:return[4,this.onEnd()];case 6:return t.sent(),[2]}}))}))},t}();e.Game=a},698:(t,e)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=e.KeyBoardAction=e.KeyboardKey=void 0,function(t){t.ArrowRight="ArrowRight",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown"}(o=e.KeyboardKey||(e.KeyboardKey={}));var i=function(t,e){this.key=t,this.action=e};e.KeyBoardAction=i;var n=function(){function t(){var t=this;this.enabled=!1,this.actions=[],window.addEventListener("keydown",(function(e){if(t.enabled){var o=e.key,i=t.actions.find((function(t){return t.key===o}));return i?i.action():void 0}}))}return t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.addCrossActions=function(t,e){void 0===e&&(e=1),this.addAction(o.ArrowUp,(function(){return t.moveUp(e)})),this.addAction(o.ArrowDown,(function(){return t.moveDown(e)})),this.addAction(o.ArrowRight,(function(){return t.moveRight(e)})),this.addAction(o.ArrowLeft,(function(){return t.moveLeft(e)}))},t.prototype.addAction=function(t,e){this.actions.push(new i(t,e))},t}();e.Keyboard=n},787:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=e.MoveOptions=void 0;e.MoveOptions=function(){this.allowBlocked=!0};var o=function(){function t(e,o){this.visible=!0,this.traversable=!1,this.progressive=!0,this.x=0,this.y=0,this.width=0,this.height=0,this.uid=t.uid++,this.zone=e,this.rendering=o}return t.prototype.render=function(t){this.visible&&this.rendering(t,this)},t.prototype.moveUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e={}),console.log("moveUp1",this.x,this.y);for(var o=0;o<t;o++){if(this.y-1<this.zone.y){if(e.allowBlocked)break;throw new Error("zone limit up reached")}if(this.zone.getSprites(this.x,this.y-1).some((function(t){return!t.traversable}))){if(e.allowBlocked)break;throw new Error("collision up")}this.y--}return console.log("moveUp2",this.x,this.y),this},t.prototype.moveDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e={}),console.log("moveDown1",this.x,this.y);for(var o=0;o<t;o++){if(this.zone.y+this.zone.height<this.y+this.height+1){if(console.log("zone limit down reached",this.zone.y+this.zone.height,"<=",this.y+this.height+1),e.allowBlocked)break;throw new Error("zone limit down reached")}if(this.zone.getSprites(this.x,this.y+this.height).some((function(t){return!t.traversable}))){if(console.log("collision down",this.x,this.y+this.height+1),e.allowBlocked)break;throw new Error("collision down")}this.y++}return console.log("moveDown2",this.x,this.y),this},t.prototype.moveLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e={});for(var o=0;o<t;o++){if(this.x-1<this.zone.x){if(e.allowBlocked)break;throw new Error("zone limit left reached")}if(this.zone.getSprites(this.x-1,this.y).some((function(t){return!t.traversable}))){if(e.allowBlocked)break;throw new Error("collision left")}this.x--}return this},t.prototype.moveRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e={});for(var o=0;o<t;o++){if(this.zone.x+this.zone.width<=this.x+this.width+1){if(e.allowBlocked)break;throw new Error("zone limit right reached")}if(this.zone.getSprites(this.x+this.width,this.y).some((function(t){return!t.traversable}))){if(e.allowBlocked)break;throw new Error("collision right")}this.x++}return this},t.prototype.isCollision=function(t){return this.x===t.x&&this.y===t.y},t.prototype.moveToHV=function(t,e){void 0===e&&(e=1);try{return this.moveToH(t,e)}catch(o){return this.moveToV(t,e)}},t.prototype.moveToVH=function(t,e){void 0===e&&(e=1);try{return this.moveToV(t,e)}catch(o){return this.moveToH(t,e)}},t.prototype.moveToV=function(t,e){if(void 0===e&&(e=1),this.isUp(t))return this.moveDown(e);if(this.isDown(t))return this.moveUp(e);throw new Error("can not move to sprite verticaly")},t.prototype.moveToH=function(t,e){if(void 0===e&&(e=1),this.isLeft(t))return this.moveRight(e);if(this.isRight(t))return this.moveLeft(e);throw new Error("can not move to sprite horizontaly")},t.prototype.moveToRandomly=function(t,e){return void 0===e&&(e=1),Math.random()<.5?this.moveToHV(t,e):this.moveToVH(t,e)},t.prototype.isUp=function(t){return this.y<t.y},t.prototype.isDown=function(t){return t.y<this.y},t.prototype.isLeft=function(t){return this.x<t.x},t.prototype.isRight=function(t){return t.x<this.x},t.uid=1,t}();e.Sprite=o},723:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.World=void 0;var o=function(){function t(){}return t.prototype.gravityUp=function(t){t.sprites.map((function(t){t.moveUp(1,{allowBlocked:!0})}))},t.prototype.gravityDown=function(t){t.sprites.map((function(t){t.moveDown(1,{allowBlocked:!0})}))},t.prototype.gravityLeft=function(t){t.sprites.map((function(t){t.moveLeft(1,{allowBlocked:!0})}))},t.prototype.gravityRight=function(t){t.sprites.map((function(t){t.moveRight(1,{allowBlocked:!0})}))},t}();e.World=o},450:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Zone=void 0;var i=o(787),n=function(){function t(e,o){void 0===o&&(o=function(){}),this.x=0,this.y=0,this.width=0,this.height=0,this.visible=!0,this.sprites=[],this.rendering=function(){},this.uid=t.uid++,this.game=e,this.rendering=o}return t.prototype.newSprite=function(t,e,o){void 0===o&&(o=function(){});var n=new i.Sprite(this,o);return n.x=t,n.y=e,this.sprites.push(n),n},t.prototype.getSprites=function(t,e){return this.sprites.filter((function(o){return o.x===t&&o.y===e}))},t.prototype.render=function(t){this.visible&&(this.rendering(t,this),this.sprites.map((function(e){return e.render(t)})))},t.uid=1,t}();e.Zone=n}},e={};new(function o(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,o),r.exports}(685).Snake)("app").start()})();